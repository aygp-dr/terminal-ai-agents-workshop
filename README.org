#+TITLE: Terminal AI Agents Workshop
#+AUTHOR: aygp-dr
#+OPTIONS: toc:2 num:nil

* Overview

A comprehensive workshop for building terminal-based AI agents with LLM tool calling, featuring implementations in Python and Scheme with literate programming via Org-mode.

[[https://github.com/aygp-dr/terminal-ai-agents-workshop][https://img.shields.io/badge/python-3.11+-blue.svg]]
[[https://github.com/aygp-dr/terminal-ai-agents-workshop][https://img.shields.io/badge/uv-package_manager-green.svg]]
[[https://github.com/aygp-dr/terminal-ai-agents-workshop][https://img.shields.io/badge/org--mode-literate_programming-purple.svg]]

* Features

- ü§ñ Complete terminal AI agent implementations
- üõ†Ô∏è Extensible tool system for file operations, git, web search
- üìö Literate programming with Org-mode
- üêç Python and Scheme (Guile) implementations
- üß™ Comprehensive testing framework
- üìä Agent comparison and benchmarking tools
- üîß Full Emacs integration with project-specific configuration

* Quick Start

** Prerequisites

- Python 3.11+
- =uv= package manager
- Emacs (optional, for Org-mode features)
- Git

** Installation

#+begin_src bash
# Clone the repository
git clone https://github.com/aygp-dr/terminal-ai-agents-workshop.git
cd terminal-ai-agents-workshop

# Install dependencies with uv
gmake dev

# Or manually
uv sync

# Install pre-commit hooks
gmake setup
#+end_src

** Running the Workshop

#+begin_src bash
# Run the minimal agent
uv run python src/labs/minimal_agent.py

# Run the complete agent
uv run python src/examples/complete_agent.py

# Run tests
gmake test

# Run linting and formatting
gmake lint format
#+end_src

* Project Structure

#+begin_example
terminal-ai-agents-workshop/
‚îú‚îÄ‚îÄ setup.org                 # Literate programming source
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ patterns/            # Agent design patterns
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ basic_tool.py    # Tool calling pattern
‚îÇ   ‚îú‚îÄ‚îÄ labs/                # Workshop exercises
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ minimal_agent.py # Minimal implementation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ agent_comparison.py # Benchmarking
‚îÇ   ‚îú‚îÄ‚îÄ tools/               # Tool implementations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file_operations.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ git_operations.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ project_analysis.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ web_search.py
‚îÇ   ‚îî‚îÄ‚îÄ examples/            # Complete examples
‚îÇ       ‚îî‚îÄ‚îÄ complete_agent.py
‚îú‚îÄ‚îÄ tests/                   # Test suite
‚îú‚îÄ‚îÄ scripts/                 # Setup and utility scripts
‚îî‚îÄ‚îÄ Makefile                # Development commands
#+end_example

* Workshop Labs

** Lab 1: Building a Minimal Agent

Learn the fundamentals of tool-calling agents by building a minimal implementation that can read files and execute shell commands.

#+begin_src python
from src.labs.minimal_agent import MinimalAgent

agent = MinimalAgent(api_key="your-key")
response = agent.chat("List all Python files in the current directory")
#+end_src

** Lab 2: Implementing Tool Patterns

Explore different tool patterns including file operations, project analysis, and web search integration.

** Lab 3: Agent Comparison

Benchmark different terminal AI agents (Claude Code, Aider, Amp, Gemini CLI) on common development tasks.

** Lab 4: Building Custom Tools

Create your own tools for specific workflows and integrate them with the agent framework.

* Development

** Available Make Targets

#+begin_src bash
make help      # Show all available commands
make dev       # Install development dependencies
make test      # Run test suite
make lint      # Run linting checks
make format    # Format code
make typecheck # Run type checking with pyright
make clean     # Clean cache and build files
make docs      # Generate documentation
#+end_src

** Emacs Integration

The project includes comprehensive Emacs configuration:

- =.dir-locals.el= - Project-specific settings
- =.projectile= - Project navigation
- Automatic =uv= integration for Python shells
- Configured flycheck and LSP support

** Literate Programming

The main workshop content is written in =setup.org= using literate programming. To extract (tangle) the source code:

#+begin_src bash
# Using Emacs
emacs --batch -l org setup.org -f org-babel-tangle

# Or using the Makefile
make tangle
#+end_src

* Tool System

** Core Tools

| Tool | Purpose | Example Usage |
|------+---------+---------------|
| =create_file= | Create new files | Generate boilerplate code |
| =edit_file= | Modify existing files | Apply fixes and refactoring |
| =list_directory= | Browse project structure | Understand codebase layout |
| =run_command= | Execute shell commands | Run tests, builds |
| =git_operations= | Version control | Commit, diff, branch management |
| =web_search= | Search and fetch web content | Find documentation, examples |
| =project_analysis= | Analyze code structure | Find TODOs, analyze imports |

** Creating Custom Tools

#+begin_src python
from typing import Dict, Any

def my_custom_tool(param1: str, param2: int) -> str:
    """Your custom tool implementation"""
    # Tool logic here
    return f"Processed {param1} with {param2}"

# Register with agent
agent.tools.register(Tool(
    name="my_tool",
    description="Description for LLM",
    parameters={
        "type": "object",
        "properties": {
            "param1": {"type": "string"},
            "param2": {"type": "integer"}
        }
    },
    function=my_custom_tool
))
#+end_src

* API Keys

Set up your API keys in environment variables or =.env= file:

#+begin_src bash
export ANTHROPIC_API_KEY="your-key"
export OPENAI_API_KEY="your-key"
export GEMINI_API_KEY="your-key"
#+end_src

* Contributing

Contributions are welcome! Please:

1. Fork the repository
2. Create a feature branch
3. Run tests and linting
4. Submit a pull request

* Resources

** Terminal AI Agents

*** Agent Comparison Matrix

| Agent | Version | Provider | Interface | Key Features |
|-------+---------+----------+-----------+--------------|
| [[https://github.com/anthropics/claude-code][Claude Code]] | 2.0.75 | Anthropic | CLI/Terminal | Agentic coding, file ops, bash, multi-tool orchestration |
| [[https://docs.github.com/en/copilot/using-github-copilot/using-github-copilot-in-the-command-line][GitHub Copilot CLI]] | 1.1.1 | GitHub/Microsoft | CLI (=gh copilot=) | Explain/suggest commands, shell integration |
| [[https://github.com/google-gemini/gemini-cli][Gemini CLI]] | 0.1.7 | Google | CLI/Terminal | Gemini 2.5 Pro, Google ecosystem, multimodal |
| [[https://github.com/paul-gauthier/aider][Aider]] | 0.86.1* | Open Source | CLI/Terminal | Git-aware, multi-file editing, many LLM backends |
| [[https://ampcode.com][Amp]] | 0.0.1766347278 | Sourcegraph | CLI/Terminal | Code search, multi-repo context, Cody-based |
| [[https://github.com/All-Hands-AI/OpenHands][OpenHands]] | - | Open Source | Terminal/Web | Full development capabilities, sandboxed execution |
| [[https://github.com/steveyegge/efrit][Efrit]] | 0.4.1 | Steve Yegge | Emacs | Native Elisp agent, 35+ tools, Claude-powered |
| [[https://github.com/openai/codex][OpenAI Codex CLI]] | 0.77.0 | OpenAI | CLI/Terminal | GPT-powered, file editing, sandboxed |
| [[https://github.com/block/goose][Goose]] | 0.9.11 | Block/Square | CLI/Terminal | Local-first, offline support, extensible |
| [[https://github.com/OpenInterpreter/open-interpreter][Open Interpreter]] | - | Open Source | CLI/Terminal | Code execution, multi-LLM, computer control |
| [[https://github.com/cline/cline][Cline]] | - | Open Source | VS Code | Agentic coding, MCP tools, multi-provider |
| [[https://github.com/opencode-ai/opencode][OpenCode]] | - | Open Source | CLI/Terminal | 75+ LLM providers, extensible |
| [[https://aws.amazon.com/q/][Amazon Q CLI]] | - | AWS | CLI/Terminal | AWS ecosystem, enterprise security |
| [[https://cursor.com/blog/cli][Cursor CLI]] | - | Cursor | CLI/Terminal | Full agent from terminal, MCP support |
| [[https://www.continue.dev/][Continue]] | - | Open Source | CLI/IDE | TUI + headless modes, async agents |
| [[https://github.com/plandex-ai/plandex][Plandex]] | - | Open Source | CLI/Terminal | 2M token context, multi-file planning |
| [[https://mentat.ai/][Mentat]] | - | Abante AI | CLI/Terminal | Multi-file editing, project context |
| [[https://github.com/gptme/gptme][gptme]] | - | Open Source | CLI/Terminal | Shell, Python, browser, vision tools |
| [[https://github.com/AbanteAI/rawdog][Rawdog]] | - | Abante AI | CLI/Terminal | Self-selecting context, Python exec |
| [[https://www.atlassian.com/software/rovo][Rovo Dev CLI]] | - | Atlassian | CLI/Terminal | 42% SWE-bench, Jira integration |
| [[https://zed.dev/acp][Zed ACP Agents]] | - | Zed | IDE/CLI | Agent Client Protocol, multi-agent |
| [[https://windsurf.com/][Windsurf]] | - | Codeium | IDE | Agentic IDE, Devin features |
| [[https://www.qodo.ai/][Qodo]] | - | Qodo | IDE/CLI | Enterprise code review, CI/CD |
| [[https://devikaai.org/][Devika]] | - | Open Source | Web/CLI | Open-source Devin alternative |
| [[https://github.com/SWE-agent/SWE-agent][SWE-agent]] | - | Princeton NLP | CLI/Terminal | GitHub issue resolution, research |
| [[https://github.com/stitionai/devika][Google Jules]] | - | Google | CLI/API | Autonomous coding, CI/CD pipelines |

*** FreeBSD Compatibility Notes

Not all agents work on FreeBSD 14.3. Current status:

| Agent | FreeBSD Status | Issue |
|-------+----------------+-------|
| Claude Code | ‚úÖ Works | Native support |
| Amp | ‚úÖ Works | Native support |
| Gemini CLI | ‚úÖ Works | Native support |
| GitHub Copilot CLI | ‚úÖ Works | Via =gh= extension |
| Efrit | ‚úÖ Works | Pure Elisp |
| Aider | ‚ùå Build fails | tree-sitter packages need =parser.h= |
| OpenAI Codex CLI | ‚ùå Unsupported | Explicit FreeBSD check in code |
| Goose | ‚ö†Ô∏è Dep issues | langfuse.decorators module missing |
| Open Interpreter | ‚úÖ Works | v0.4.3, 44min build |

*** Efrit - Native Emacs AI Agent

Efrit is a *pure Elisp coding agent* that brings Claude directly into Emacs. Core philosophy: /"Claude makes all decisions, Efrit executes."/

*Key Features:*
- 35+ tools: code execution, file editing, codebase exploration, git, shell
- Three modes: =efrit-chat= (conversation), =efrit-do= (quick tasks), =efrit-agent= (complex projects)
- Safety controls: checkpoints, confirmations, timeout limits, shell restrictions
- AI-to-AI communication via MCP file-based JSON queue

*Installation:*

#+begin_src elisp
(use-package efrit
  :load-path "~/path/to/efrit/lisp"
  :commands (efrit-chat efrit-do efrit-agent efrit-remote-queue-start)
  :bind (("C-c C-e c" . efrit-chat)
         ("C-c C-e d" . efrit-do)
         ("C-c C-e a" . efrit-agent)
         ("C-c C-e q" . efrit-remote-queue-start))
  :config
  (setq efrit-default-model "claude-sonnet-4-5-20250929"))
#+end_src

*MCP Queue Communication:*

Other AI agents (Claude Code, Cursor, etc.) can interact with Efrit via file-based JSON queues:

#+begin_example
~/.emacs.d/.efrit/
‚îú‚îÄ‚îÄ queues/
‚îÇ   ‚îú‚îÄ‚îÄ requests/    # Drop JSON requests here
‚îÇ   ‚îú‚îÄ‚îÄ processing/  # Currently being processed
‚îÇ   ‚îú‚îÄ‚îÄ responses/   # Completed responses
‚îÇ   ‚îî‚îÄ‚îÄ archive/     # Historical requests
#+end_example

Request format:

#+begin_src json
{
  "id": "req_001",
  "version": "1.0.0",
  "type": "eval",
  "content": "(buffer-name)",
  "timestamp": "2025-12-21T12:00:00Z"
}
#+end_src

Types: =eval= (elisp), =command= (natural language), =chat= (conversation), =status= (health check)

*Emacs Versions Tested:* 28.2, 29.4, 30.1

** Research Papers and Literature
- [[file:research/reading-list.org][Comprehensive Reading List]] - Annotated bibliography of 40+ papers
- [[https://arxiv.org/abs/2210.03629][ReAct: Reasoning and Acting (2022)]] - Foundational paradigm
- [[https://arxiv.org/abs/2405.15793][SWE-agent (2024)]] - Software engineering agents
- [[https://www.swebench.com][SWE-bench]] - Real-world software engineering benchmark

** Benchmarks & Evaluation
- [[https://www.swebench.com][SWE-bench]] - GitHub issue resolution (2,294 tasks)
- [[https://scale.com/leaderboard/swe_bench_pro_public][SWE-bench Pro]] - Harder variant (top models ~23%)
- [[https://www.tbench.ai][Terminal-Bench]] - Real terminal task evaluation (Stanford/Laude)
- [[https://livebench.ai][LiveBench]] - Continuously updated benchmarks

** Documentation
- [[https://docs.anthropic.com/claude/docs/tool-use][Anthropic Tool Use]]
- [[https://platform.openai.com/docs/guides/function-calling][OpenAI Function Calling]]
- [[https://ghuntley.com/agent/][How to build an agent]]

* License

MIT License - See LICENSE file for details

* Acknowledgments

- Workshop inspired by the terminal AI agent pattern pioneered by Geoffrey Huntley
- Scheme implementation based on patterns from =guile-ampcode-agent=
- Community contributions from workshop participants

* Contact

- Repository: [[https://github.com/aygp-dr/terminal-ai-agents-workshop]]
- Issues: [[https://github.com/aygp-dr/terminal-ai-agents-workshop/issues]]
- Collaborators: @jwalsh, @seanjensengrey